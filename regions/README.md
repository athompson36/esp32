# Map Regions & T-Deck Tile Structure

Compatible with **Meshtastic T-Deck** offline maps and the [tdeck-maps](https://github.com/JustDr00py/tdeck-maps) tile generator.

## Tile folder structure (Meshtastic / T-Deck)

Tiles must follow this layout so the T-Deck (and Launcher) can find them:

```
{output_dir}/
  metadata.json      # Bounds, minzoom, maxzoom, format, source
  {zoom}/
    {x}/
      {y}.png        # 256×256 PNG tiles (Web Mercator / XYZ)
```

- **Zoom**: integer 0–16+ (e.g. 8, 9, 10).
- **x, y**: tile indices (Web Mercator, origin top-left).
- **File names**: `y` is the tile row (integer); file must be `{y}.png`.

Example: `tiles/10/256/384.png` = zoom 10, column 256, row 384.

## T-Deck / Meshtastic Device-UI (MUI) SD card placement

- At the **root** of the SD card create a folder **`maps`** (plural). SD must be **FAT32 or exFAT** and **≥ 2GB**.
- Inside `maps`, create one folder per map style (e.g. **`osm`**, **`carto`**, **`terrain`**).
- Copy the **contents** of your generated tile folder (metadata.json and the zoom folders 8/, 9/, …) **into** that style folder. Do not copy the output folder itself as a subfolder of `maps`.

Resulting structure (required by [device-ui](https://github.com/meshtastic/device-ui/tree/master/maps)):

- `maps/osm/metadata.json` and `maps/osm/{z}/{x}/{y}.png` (z = zoom: 8, 9, 10, …)
- or `maps/carto/`, `maps/terrain/`, etc.

So the SD has **`maps/{style}/{zoom}/{x}/{y}.png`** and **`maps/{style}/metadata.json`**. If tiles do not load, check the folder names are exactly **maps** and the style name (e.g. **carto**), and zoom out on the device to the zoom levels you downloaded.

## Naming conventions

- **Region slug**: lowercase, underscores (e.g. `north_america`, `california`). Used in predefined regions.
- **City names**: use quotes in CLI when spaces exist: `"San Francisco"`, `"Portland, Oregon"`.
- **Multiple cities**: semicolon-separated, entire argument in quotes: `"New York; Los Angeles; Las Vegas"`.
- **Map source**: `osm` | `satellite` | `terrain` | `cycle` | `carto` | `carto_dark` | `stadia` | `stadia_dark` — determines tile URL and suggested folder name on SD. Use **`carto_dark`** or **`stadia_dark`** for a darker color scheme (easier on the eyes). Use `carto` or `stadia` as alternatives when OSM does not allow bulk/offline use.

## metadata.json format

Generated by the tile script. Includes both lowercase and camelCase zoom keys for Meshtastic Device-UI compatibility. Example:

```json
{
  "name": "Generated tiles (osm)",
  "description": "Map tiles for Meshtastic T-Deck",
  "bounds": [west, south, east, north],
  "minzoom": 8,
  "maxzoom": 12,
  "minZoom": 8,
  "maxZoom": 12,
  "format": "png",
  "type": "baselayer",
  "source": "osm",
  "tileSize": 256,
  "generated": "2025-02-17 12:00:00"
}
```

## Predefined regions

See **regions.json** for the full list of predefined regions (continents, countries, US states) with bounding boxes. The map wizard and CLI use this file to list all available regions, areas, countries, and states.
